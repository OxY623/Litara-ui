var e=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(r,a,s)=>a in r?e(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,i=(e,r)=>{for(var a in r||(r={}))n.call(r,a)&&o(e,a,r[a]);if(s)for(var a of s(r))t.call(r,a)&&o(e,a,r[a]);return e};import{r as l,J as m,D as c,j as d,B as u,T as p,C as g,b,M as f}from"./index-BnhGmwnk.js";import{u as j}from"./createSvgIcon-TnKg1dvb.js";import{C as h,A as x}from"./Container-CeRawMxl.js";import{T as v}from"./TextField-BMM9qvp_.js";import"./vendor-_g6xLlVr.js";import"./useThemeProps-CpAc3TNq.js";const y=f`
  mutation signIn($username: String, $email: String, $password: String!) {
    signIn(username: $username, email: $email, password: $password)
  }
`;function w(){const[e,s]=l.useState({username:"",email:"",password:""}),n=m(),t=c(),[o,{loading:f,error:w}]=j(y,{onCompleted:e=>{console.log("Sign in successful:",e),localStorage.setItem("token",e.signIn),n.cache.evict({fieldName:"isLoggedIn"}),n.cache.gc(),t("/")},onError:e=>{console.error("Error during sign in:",e)}});l.useEffect(()=>{document.title="Sign In - OranNote"},[]);const S=n=>{var t,o;s((t=i({},e),o={[n.target.name]:n.target.value},r(t,a(o))))};return d.jsx(h,{maxWidth:"sm",children:d.jsxs(u,{className:"border-amber-500",sx:{border:"1px solid",borderRadius:2,p:4,mt:6},children:[d.jsx(p,{variant:"h5",component:"h2",gutterBottom:!0,className:"text-amber-500",children:"Sign In"}),d.jsxs("form",{onSubmit:r=>{r.preventDefault(),o({variables:i({},e)})},children:[d.jsx(v,{fullWidth:!0,margin:"normal",label:"Username",name:"username",value:e.username,onChange:S,required:!0}),d.jsx(v,{fullWidth:!0,margin:"normal",label:"Email",name:"email",type:"email",value:e.email,onChange:S}),d.jsx(v,{fullWidth:!0,margin:"normal",label:"Password",name:"password",type:"password",value:e.password,onChange:S,required:!0}),f&&d.jsx(u,{sx:{display:"flex",justifyContent:"center",my:2},children:d.jsx(g,{})}),w&&d.jsx(x,{severity:"error",sx:{my:2},children:"Error :( Please try again"}),d.jsx(b,{fullWidth:!0,variant:"contained",color:"primary",className:"bg-amber-500 hover:bg-amber-600",type:"submit",sx:{mt:2},children:"Sign In"})]})]})})}export{w as default};
